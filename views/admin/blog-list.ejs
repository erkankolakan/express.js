<!DOCTYPE html>
<html lang="en">
<head>
 <%- include('../partials/head') %>
</head>
<body>
    
    <%- include('../partials/nav') %> 
        <div class="container mt-3 ">
            
            <div class="col-md-12 mt-3" >
                <!-- bize action=edit bilgisinden bir değer geliyorsa ve bu gelen değer edit ise bize üstden bid div blog güncellendi diye bir alert atacaktır. -->
                <% if (action != "undefined" && action=="edit") { %> 
                    <div class="alert alert-success">
                     <%= blogid %> numaralı blog başarıyla güncellendi
                    </div>
                    
                <% } %>

                <% if (action != "undefined" && action=="create") { %> 
                    <div class="alert alert-success">
                        Blog başarıyla eklendi
                    </div>
                    
                <% } %>

                <% if (action != "undefined" && action=="delete") { %>
                    <div class="alert alert-success">
                        Blog başarıyla silindi
                    </div>
                <% } %>

                
                <table class="table table-bordered table-striped" >
                    <thead>
                        <tr>
                            <th style="width:50px;">id</th>
                            <th style="width:150px;">resim</th>
                            <th>baslik</th>
                            <th>kategori</th>
                            <th style="width:130px;">id</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% blogs.forEach(element => { %>
                            <tr>
                                <td># <%= element.dataValues.id %></td>
                                <td>
                                    <img src="/static/images/<%= element.dataValues.resim %>" class="img-fluid"  width="400" height="200"  alt="">
                                </td>

                                <td>
                                   <p><%= element.dataValues.baslik %></p> 
                                </td>   

                                <td>
                                    
                                    <% element.categories.forEach(category => { %>
                                      <p>  <%= category.name %> </p>
                                    <% }) %>


                                </td>
                                <td>
                                    <a class="btn btn-sm btn-primary" href="/admin/blog/<%= element.dataValues.id %>">düzenle</a>
                                    <a class="btn btn-sm btn-danger" href="/admin/blog/delete/<%= element.dataValues.id %>">sil</a>
                                </td>
                            </tr>
                        <% }) %>

                    </tbody>
                </table>
            </div>
        </div>
</div>

</body>
</html>


