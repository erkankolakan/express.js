<!DOCTYPE html>
<html lang="en">
<head>
 <%- include('../partials/head') %>
</head>
<body>
    
    <%- include('../partials/nav') %> 

    <div class="container mt-3 ">
        <div class="row">
            <div class="col-md-12 mt-3">
            
                <form method="post">
                    <input type="hidden" name="blogid" value="<%= blog.blogid %>">
<!-- kullanıcı url den :blogid kısmı değiştirsede ve aciklama baslik gibi değer güncellerse url de yazdığğı değeri güncellemiş olur. ör/ tıkladığı blogid değeri 2 url de bu yüzden 2 yazar kullanıcı gidip url deki 2 yerine 4 yazarsa güncellemiş olduğu aciklama baslik değerleri 4 blogid değerine sahip blogu güncellemiş olur. O yüzden biz bunu engellemek için kullanıcı hangi blog a tıklarsa o blogun blogid değeri blogid namesi ile body sayesinde bize gelmiş olur biz de bu değeri çekersek ve req.params.blogid yerine req.body.blogid değerini alırsak ona göre veri güncelleme işlemi yaparsak açık bırakmadan bu işlemi tamamlamış oluruz.  -->
                    <div class="row mb-3"> 
                        <label for="baslik" class="col-sm-2 col-form-label">Başlık</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" id="baslik" name="baslik" value="<%= blog.baslik %>">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <label for="aciklama" class="col-sm-2 col-form-label">Açıklama</label>
                        <div class="col-sm-8">
                            <textarea class="form-control" name="aciklama" rows="10" > <%= blog.aciklama %> </textarea>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <label for="resim" class="col-sm-2 col-form-label">Resim</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" id="resim" name="resim"   value="<%= blog.resim %>"   >
                        </div>
                    </div>


    <div class="row mb-3">
        <label for="kategori" class="col-sm-2 col-form-label">Kategori</label>
        <div class="col-sm-8">
            <select name="kategori" id="kategori" class="form-select">
                <option value="-1">Kategori Seçiniz</option>
                    <% categories.forEach(category => { %>
                        <option value="<%= category.category_id %>" selected ><%= category.name %></option>
                    <% }) %>
            </select>

            <script>
                document.querySelector("#kategori").value = "<%= blog.categoryid %>"
            </script>
    </div>
    </div>

    <div class="row mb-3">
        <div class="col-sm-8 offset-sm-2">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="anasayfa" name="anasayfa" <%= blog.anasayfa?"checked":"" %>/> 
            <label class="form-check-label" for="anasayfa">
                Anasayfa
            </label>
          </div>
        </div>
      </div>

    <div class="row mb-3">
        <div class="col-sm-8 offset-sm-2">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="onay" name="onay" <%= blog.onay?"checked":"" %>/>
            <label class="form-check-label" for="onay">
                Onay
            </label>
          </div>
        </div>
    </div>


        <div class="row mb-3">
            <div class="col-sm-8 offset-sm-2">
                <button type="submit" class="btn btn-primary">Kaydet</button>
            </div>
        </div>

</form>

            </div>
        </div>
    </div>

</body>
</html>


