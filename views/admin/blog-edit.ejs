<!DOCTYPE html>
<html lang="en">
<head>
 <%- include('../partials/head') %>
</head>
<body>
    
    <%- include('../partials/nav') %> 

    <div class="container mt-3 ">
        <form method="post"   enctype="multipart/form-data" > 

            <div class="row">
                <div class="col-md-10 ">
                    <input type="hidden" name="resim" value="<%= blog.resim %>">  
                    <input type="hidden" name="blogid" value="<%= blog.id %>">
                    <div class="row mb-3"> 
                        <label for="baslik" class="col-sm-1 col-form-label">Başlık</label>
                        <div class="col-sm-11">
                            <input type="text" class="form-control" id="baslik" name="baslik" value="<%= blog.baslik %>">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <label for="altbaslik" class="col-sm-1 col-form-label">Alt Başlık</label>
                        <div class="col-sm-11">
                            <textarea class="form-control" name="altbaslik" rows="5"><%= blog.altbaslik %></textarea>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <label for="aciklama" class="col-sm-1 col-form-label">Açıklama</label>
                        <div class="col-sm-11">
                            <textarea id="editor" class="form-control" name="aciklama" rows="10" > <%= blog.aciklama %> </textarea>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <label for="resim" class="col-sm-1 col-form-label">Resim</label>
                        <div class="col-sm-11">
                            <img src="/static/images/<%= blog.resim %>" width="200px"  alt="">
                            <input type="file" class="form-control" id="resim" name="resim">
                        </div>
                    </div>


        <div class="row mb-3">
            <div class="col-sm-8 offset-sm-2">
                <button type="submit" class="btn btn-primary">Kaydet</button>
            </div>
        </div>

            </div>
            
            <div class="col-md-2">
                    
                <div class="row mb-3 ">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="anasayfa" name="anasayfa" <%= blog.anasayfa?"checked":"" %>/> 
                        <label class="form-check-label" for="anasayfa">
                            Anasayfa
                        </label>
                      </div>
                  </div>
            
                <div class="row border-top pt-3 ">

                    <% categories.forEach(element => { %>
                        <div class="form-check">
                            <input class="form-check-input"
                                type="checkbox"
                                id="category_<%= element.id %>" 
                                name="categories[]"
                                value="<%= element.id %>"
                                <%= blog.categories.some(cat => cat.id == element.id ) ? "checked" : " " %>
                            />

                         <label class="form-check-label" for="category_<%= element.id %>">
                             <%= element.name %>
                         </label>
                    </div>
                <% }) %>
            </div>
        </div>
    </div>
</form>
</div>


    <script src="https://cdn.ckeditor.com/ckeditor5/39.0.2/classic/ckeditor.js"> </script>
    <script>
        // bu kısımları full CK editor sayfasından kopyalıyoruz. Ztn kendisi bizim için herşeyi yazmış.

        ClassicEditor
        .create( document.querySelector( '#editor' ) )
        .catch( error => {
            console.error( error );
            });
    </script>


</body>
</html>


